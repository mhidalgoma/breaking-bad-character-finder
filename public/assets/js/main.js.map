{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n//QUERY SELECTORS\nconst charactersList = document.querySelector('.js-characters-list');\nconst favList = document.querySelector('.js-fav-list');\nconst searchBtn = document.querySelector('.js-search-btn');\nconst input = document.querySelector('.js-input');\nconst charactersSection = document.querySelector('.js-characters-section');\nconst favSection = document.querySelector('.js-fav-section');\nconst resetBtn = document.querySelector('.js-reset-btn');\nconst goFavBtn = document.querySelector('.js-btn-go-fav');\n\n//VARIABLES GLOBALES\nlet allCharacters = [];\nlet favCharacters = [];\nlet currentSearchCharacters = [];\n\n// FUNCIONES\nfunction renderOneCharacter(character) {\n  const characterElement = document.createElement('li');\n  characterElement.classList.add('character');\n  characterElement.classList.add('js-character');\n  characterElement.setAttribute('id', character.char_id);\n\n  const divHeart = document.createElement('div');\n  const characterHeart = document.createElement('i');\n  characterHeart.classList.add('fa-solid');\n  characterHeart.classList.add('fa-heart');\n  characterHeart.classList.add('fa-xl');\n  divHeart.appendChild(characterHeart);\n  divHeart.classList.add('character__heart');\n  characterElement.appendChild(divHeart);\n\n  const characterImg = document.createElement('img');\n  characterImg.classList.add('character__img');\n  characterImg.src = character.img;\n  characterImg.setAttribute('alt', `image of ${character.name}`);\n  characterElement.appendChild(characterImg);\n\n  const characterName = document.createElement('h3');\n  characterName.classList.add('character__name');\n  const textName = document.createTextNode(character.name);\n  characterName.appendChild(textName);\n  characterElement.appendChild(characterName);\n\n  //   const listOccupations = document.createElement('ul');\n  //   listOccupations.classList.add('js-list-ocupations');\n\n  //   for (const occupation of character.occupation) {\n  //     const li = document.createElement('li');\n  //     const text = document.createTextNode(occupation);\n  //     li.appendChild(text);\n  //     listOccupations.appendChild(li);\n  //   }\n  //   characterElement.appendChild(listOccupations);\n\n  const characterStatus = document.createElement('p');\n  characterStatus.classList.add('character__status');\n  const textStatus = document.createTextNode(character.status);\n  characterStatus.appendChild(textStatus);\n  characterElement.appendChild(characterStatus);\n\n  return characterElement;\n}\nfunction renderOneFavCharacter(character) {\n  const characterElement = document.createElement('li');\n  characterElement.classList.add('character--fav');\n  characterElement.classList.add('js-fav-character');\n  characterElement.setAttribute('id', character.char_id);\n\n  const divHeartCross = document.createElement('div');\n  const iconHeartCross = document.createElement('i');\n  iconHeartCross.classList.add('fa-solid');\n  iconHeartCross.classList.add('fa-heart-circle-xmark');\n  iconHeartCross.classList.add('fa-xl');\n  divHeartCross.appendChild(iconHeartCross);\n  divHeartCross.classList.add('character__heart--cross');\n  characterElement.appendChild(divHeartCross);\n\n  const characterImg = document.createElement('img');\n  characterImg.classList.add('character__img');\n  characterImg.src = character.img;\n  characterImg.setAttribute('alt', `image of ${character.name}`);\n  characterElement.appendChild(characterImg);\n\n  const characterName = document.createElement('h3');\n  characterName.classList.add('character__name--fav');\n  const textName = document.createTextNode(character.name);\n  characterName.appendChild(textName);\n  characterElement.appendChild(characterName);\n\n  const characterStatus = document.createElement('p');\n  characterStatus.classList.add('character__status--fav');\n  const textStatus = document.createTextNode(character.status);\n  characterStatus.appendChild(textStatus);\n  characterElement.appendChild(characterStatus);\n\n  return characterElement;\n}\nfunction renderAllCharacters() {\n  charactersList.innerHTML = '';\n  const characters =\n    currentSearchCharacters.length === 0\n      ? allCharacters\n      : currentSearchCharacters;\n  for (let i = 0; i < characters.length; i++) {\n    const liCharacter = renderOneCharacter(characters[i]);\n    charactersList.appendChild(liCharacter);\n    const positionInFav = favCharacters.findIndex(\n      (favCharacter) =>\n        favCharacter.char_id === parseInt(liCharacter.getAttribute('id'))\n    );\n    if (positionInFav !== -1) {\n      liCharacter.classList.add('selected');\n    }\n  }\n  listenerForCharacters();\n}\nfunction renderFavCharacters() {\n  favList.innerHTML = '';\n  for (let i = 0; i < favCharacters.length; i++) {\n    const favCharacterToRender = renderOneFavCharacter(favCharacters[i]);\n    favList.appendChild(favCharacterToRender);\n  }\n  listenerForCharactersWithHeartCross();\n}\nfunction listenerForCharacters() {\n  const allCharactersLi = document.querySelectorAll('.js-character');\n  for (const eachCharacter of allCharactersLi) {\n    eachCharacter.addEventListener('click', handleClickCharacter);\n  }\n}\nfunction listenerForCharactersWithHeartCross() {\n  const allHeartsCross = document.querySelectorAll('.fa-heart-circle-xmark');\n  for (const eachHeart of allHeartsCross) {\n    eachHeart.addEventListener('click', handleClickHeart);\n  }\n}\nfunction hideShowFavSection() {\n  if (favList.innerHTML === '') {\n    favSection.classList.add('hidden');\n    charactersSection.classList.add('when-hidden');\n  } else {\n    favSection.classList.remove('hidden');\n    charactersSection.classList.remove('when-hidden');\n  }\n}\nfunction addCharacterToFav(event) {\n  if (event.currentTarget.classList.contains('selected')) {\n    const selectedCharacter = allCharacters.find(\n      (eachCharacter) =>\n        eachCharacter.char_id ===\n        parseInt(event.currentTarget.getAttribute('id'))\n    );\n    const characterInFav = favCharacters.find(\n      (eachCharacter) =>\n        eachCharacter.char_id ===\n        parseInt(event.currentTarget.getAttribute('id'))\n    );\n    if (!characterInFav) {\n      favCharacters.push(selectedCharacter);\n    }\n  } else {\n    const selectedCharacterPosition = favCharacters.findIndex(\n      (eachCharacter) =>\n        parseInt(eachCharacter.char_id) ===\n        parseInt(event.currentTarget.getAttribute('id'))\n    );\n    favCharacters.splice(selectedCharacterPosition, 1);\n  }\n}\nfunction saveFavoritesToLocalStorage() {\n  localStorage.setItem('Favorites', JSON.stringify(favCharacters));\n}\nfunction getFavoritesFromStorage() {\n  const savedFavorites = JSON.parse(localStorage.getItem('Favorites'));\n  if (savedFavorites !== null) {\n    favCharacters = savedFavorites;\n  }\n}\nfunction handleClickCharacter(event) {\n  const selectedCharacter = allCharacters.find(\n    (eachCharacter) =>\n      eachCharacter.char_id === parseInt(event.currentTarget.getAttribute('id'))\n  );\n  //event.currentTarget.classList.toggle('selected');\n  //addCharacterToFav(event);\n  //renderFavCharacters();\n  //hideShowFavSection();\n  //saveFavoritesToLocalStorage();\n}\nfunction handleResetBtn(event) {\n  event.preventDefault();\n  favCharacters = [];\n  renderFavCharacters();\n  renderAllCharacters();\n  hideShowFavSection();\n  saveFavoritesToLocalStorage();\n}\nfunction handleSearchBtn(event) {\n  event.preventDefault();\n  currentSearchCharacters = allCharacters.filter((character) =>\n    character.name.toLowerCase().includes(input.value.toLowerCase())\n  );\n  renderAllCharacters();\n  listenerForCharacters();\n}\nfunction handleClickHeart(event) {\n  const selectedCharacterPosition = favCharacters.findIndex(\n    (eachCharacter) =>\n      parseInt(eachCharacter.char_id) ===\n      parseInt(\n        event.currentTarget.closest('.js-fav-character').getAttribute('id')\n      )\n  );\n  favCharacters.splice(selectedCharacterPosition, 1);\n  renderFavCharacters();\n  saveFavoritesToLocalStorage();\n  renderAllCharacters();\n  hideShowFavSection();\n}\n\n// EVENTOS\nsearchBtn.addEventListener('click', handleSearchBtn);\nresetBtn.addEventListener('click', handleResetBtn);\n\n// CÓDIGO QUE SE EJECUTA AL CARGAR LA PÁGINA\nfetch('./assets/data/characters.json')\n  .then((response) => response.json())\n  .then((jsondata) => {\n    allCharacters = jsondata;\n    getFavoritesFromStorage();\n    renderFavCharacters();\n    renderAllCharacters();\n    hideShowFavSection();\n  });\n"]}